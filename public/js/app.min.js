"use strict";angular.module("oneImobiliaria",["ui.router","ui.utils.masks"]).run(["$rootScope","$state","RESOURCES","UserService",function(e,r,o,t){return e.error=!1,e.success=!1,e.loading=!1,e.fileUrl=o.API_URL+"/",e.page="",e.showMenu=!1,e.showSubmenu=!1,e.appTitle="One Consultoria Imobili치ria",e.forms={},e.toggleMenu=function(){return e.showMenu=!e.showMenu},e.toggleSubmenu=function(){return e.showSubmenu=!e.showSubmenu},e.$on("$stateChangeSuccess",function(){var o;if(o=r.current.name.split("."),e.page=o[1]||"",e.error=!1,e.success=!1,e.loading=!1,e.showMenu=!1,e.showSubmenu=!1,r.current.requiredLogin&&!t.isLogged()&&t.doLogout(),!r.current.requiredLogin&&t.isLogged())return r.go("dashboard.home")})}]).constant("RESOURCES",{API_URL:"http://desenv.doisoitosete.com:3000/api"}),angular.module("oneImobiliaria").config(["$stateProvider","$httpProvider","$urlRouterProvider",function(e,r,o){return e.state("login",{url:"/login",views:{main:{templateUrl:"app/views/login/index.html",controller:"LoginCtrl"},"error@login":{templateUrl:"app/views/error.html"}},requiredLogin:!1}).state("dashboard",{url:"/dashboard","abstract":!0,views:{main:{},header:{templateUrl:"app/views/header.html"},footer:{templateUrl:"app/views/footer.html"}},requiredLogin:!0}).state("dashboard.home",{url:"/home",views:{"main@":{templateUrl:"app/views/home/index.html"}},requiredLogin:!0}).state("dashboard.users",{url:"/users",views:{"main@":{templateUrl:"app/views/users/index.html",controller:"UsersCtrl"},"submenu@dashboard.users":{templateUrl:"app/views/users/submenu.html"}},requiredLogin:!0}).state("dashboard.users.new",{url:"/new",views:{"main@":{templateUrl:"app/views/users/form.html",controller:"UsersCtrl"}},requiredLogin:!0}).state("dashboard.properties",{url:"/properties",views:{"main@":{templateUrl:"app/views/properties/index.html"},"submenu@dashboard.properties":{templateUrl:"app/views/properties/submenu.html"}},requiredLogin:!0}),o.otherwise("/login"),r.interceptors.push("sessionInjector"),r.defaults.useXDomain=!0,r.defaults.headers.common["Content-Type"]="application/json",delete r.defaults.headers.common["X-Requested-With"]}]),angular.module("oneImobiliaria").service("loading",["$rootScope",function(e){return{show:function(){return e.loading=!0},hide:function(){return e.loading=!1}}}]),angular.module("oneImobiliaria").service("logger",["$rootScope",function(e){return{clean:function(){return e.success=!1,e.error=!1,e.modalError=!1},error:function(r){return this.clean(),e.error=r},modalError:function(r){return this.clean(),e.modalError=r},success:function(r){return this.clean(),e.success=r}}}]),angular.module("oneImobiliaria").service("sessionInjector",["storage",function(e){var r;return r=function(e){return e.url.indexOf("auth")>-1||e.url.indexOf("remember")>-1},{request:function(o){return r(o)||(o.headers.session_key=e.getSessionToken()),o}}}]),angular.module("oneImobiliaria").service("storage",function(){return{isLogged:function(){return null!==localStorage.getItem("x-code-one")&&null!==localStorage.getItem("code-one")},setCodes:function(e){return localStorage.setItem("x-code-one",e.session_key),localStorage.setItem("code-one",e.id)},getSessionToken:function(){return localStorage.getItem("x-code-one")},clean:function(){return localStorage.removeItem("x-code-one"),localStorage.removeItem("code-one")}}}),angular.module("oneImobiliaria").service("UserGroupService",function(){var e;return e=[{title:"Administrador",code:"admin"},{title:"Corretor(a)",code:"broker"}],{getAll:function(){return e}}}),angular.module("oneImobiliaria").service("UserService",["$http","$state","storage","RESOURCES",function(e,r,o,t){var n;return n=t.API_URL+"/accounts",{isLogged:function(){return o.isLogged()},doLogin:function(r){return e.post(n+"/auth",r)},doLogout:function(){o.clean(),r.go("login")},getAll:function(){return e.get(n+"/")},"delete":function(r){return e["delete"](n+"/",{id:r.id})}}}]),angular.module("oneImobiliaria").controller("LoginCtrl",["$scope","$rootScope","$state","logger","storage","UserService",function(e,r,o,t,n,i){return e.user={},e.doLogin=function(){return r.forms.login.$valid?(e.user.origin="admin",i.doLogin(e.user).then(function(e){return n.setCodes(e.data),o.go("dashboard.home")})["catch"](function(e){return console.log(e),t.error("Usu치rio e/ou senha inv치lido(s).")})):void t.error("Preencha todos os dados obrigat칩rios.")}}]),angular.module("oneImobiliaria").controller("UsersCtrl",["$scope","$state","UserGroupService",function(e,r,o){return e.user={name:"Thais Martins",email:"contato@thaismartins.co",group:"broker"},e.groups=o.getAll(),e.edit=!1,e.canEdit=function(){return e.edit=!0},e.saveOrUpdate=function(){return r.go("dashboard.users")}}]);
//# sourceMappingURL=app.min.js.map
